(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b3a1a"],{"28ca":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("title-text",{staticStyle:{"margin-bottom":"20px"},attrs:{text:"物资需求计划列表",weight:"600",color:"#636569"}}),a("div",[a("selectPlan",{ref:"select",on:{select:e.selectTable,change:e.changeCount}})],1),a("materialPlan",{attrs:{operation:"true","table-data":e.tableData}}),a("nextPage",{ref:"nextPage",on:{next:e.nextPage}})],1)},l=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"90%","margin-left":"5%"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"输入计划名称"},model:{value:e.selectForm.planName,callback:function(t){e.$set(e.selectForm,"planName",t)},expression:"selectForm.planName"}})],1),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"输入计划编号"},model:{value:e.selectForm.planId,callback:function(t){e.$set(e.selectForm,"planId",t)},expression:"selectForm.planId"}})],1),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"请选择计划类型"},model:{value:e.selectForm.planType,callback:function(t){e.$set(e.selectForm,"planType",t)},expression:"selectForm.planType"}},e._l(e.planTypeTable,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"请选择需求部门"},model:{value:e.selectForm.needDepartment,callback:function(t){e.$set(e.selectForm,"needDepartment",t)},expression:"selectForm.needDepartment"}},e._l(e.options,(function(e){return a("el-option",{key:e,attrs:{value:e}})})),1)],1),a("el-col",{attrs:{span:3}},[a("el-date-picker",{attrs:{type:"year",format:"yyyy年","value-format":"yyyy",placeholder:"选择年"},on:{change:function(t){e.month=""}},model:{value:e.selectForm.planMonth,callback:function(t){e.$set(e.selectForm,"planMonth",t)},expression:"selectForm.planMonth"}})],1),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"请选择月份",disabled:""===e.selectForm.planMonth},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}},e._l(12,(function(e){return a("el-option",{key:e,attrs:{value:e}})})),1)],1)],1)],1)},s=[],c={name:"selectMaterialPlan",data:function(){return{selectForm:{planName:"",planId:"",planType:"",needDepartment:"",planMonth:""},month:"",planTypeTable:[{value:"1",label:"月计划"},{value:"2",label:"年计划"},{value:"3",label:"紧急计划"}],options:["财务部","组织部","人事部","策划部","仓库"],change:!1,cnt:{offset:0,count:10}}},methods:{selectMaterialPlan:function(e){var t=this,a=JSON.parse(JSON.stringify(this.selectForm));e.planName=""===a.planName?"0":a.planName,e.planId=""===a.planId?0:parseInt(a.planId),e.planType=""===a.planType?"0":a.planType,e.needDepartment=""===a.needDepartment?"0":a.needDepartment,console.log(e),this.$api.selectMaterialPlan(e,(function(e){t.$emit("select",e.data)}))},getMaterialPlan:function(e){var t=this;this.$api.getMaterialPlan(e,(function(e){console.log(e.data),t.$emit("select",e.data)}))},getPlan:function(e){this.change?(console.log("select"),this.selectMaterialPlan(e)):(console.log("get"),this.getMaterialPlan(e))}},watch:{select:function(e,t){if(""!==e.planName&&""!==e.planId&&""!==e.planType&&""!==e.needDepartment&&""!==e.planMonth){this.change=!0;var a=this.cnt;a.planMonth=""===this.selectForm.planMonth?0:parseInt(this.selectForm.planMonth),this.selectMaterialPlan(a)}else{var n=this.cnt;console.log(n),this.getMaterialPlan(n)}this.$emit("change")},month:function(e){var t=this.cnt;console.log(e.toString().length),e.toString().length<2?t.planMonth=parseInt(this.selectForm.planMonth+"0"+e):t.planMonth=parseInt(this.selectForm.planMonth+""+e),this.selectMaterialPlan(this.cnt),this.$emit("change"),console.log(t)},deep:!0},computed:{select:function(){return JSON.stringify(this.selectForm)}}},r=c,i=a("2877"),p=Object(i["a"])(r,o,s,!1,null,"90c3c66e",null),h=p.exports,u={name:"index",data:function(){return{tableData:[]}},methods:{nextPage:function(e){this.$refs.select.getPlan(e)},getMaterialPlan:function(e){var t=this;this.$api.getMaterialPlan(e,(function(e){t.tableData=e.data}))},selectTable:function(e){this.$refs.nextPage.judge(e.length),this.tableData=e},changeCount:function(){this.$refs.nextPage.defaultPage()}},mounted:function(){var e={offset:0,count:10};this.getMaterialPlan(e)},watch:{tableData:function(e){this.$refs.nextPage.judge(e.toString().length)}},components:{selectPlan:h}},m=u,d=Object(i["a"])(m,n,l,!1,null,"ccdef360",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b3a1a.9b1d7fc9.js.map