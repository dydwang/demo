(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cbd0a60c"],{"0df8":function(t,e,a){"use strict";var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"98%"},attrs:{id:"table-column",data:t.list}},[a("el-table-column",{attrs:{type:"index",label:" "}}),a("el-table-column",{staticStyle:{"text-align":"center"},attrs:{label:"物料清单","header-align":"center","min-width":"1000"},scopedSlots:t._u([{key:"default",fn:function(e){return[e?a("el-table",{staticStyle:{width:"98%"},attrs:{data:[e.row],align:"center"}},t._l(t.tableHead1,(function(t,e){return a("el-table-column",{key:t.prpo,attrs:{label:t.label,prop:t.prop}})})),1):t._e(),a("el-table",{staticStyle:{width:"98%"},attrs:{align:"center",data:[e.row]}},t._l(t.tableHead2,(function(t,e){return a("el-table-column",{key:t.prpo,attrs:{label:t.label,prop:t.prop}})})),1)]}}])})],1)},n=[],i={name:"meterList",props:["list"],data:function(){return{tableHead1:[{label:"物料分类编码",prop:"materialClassificationCode"},{label:"物料分类名称",prop:"materialClassificationName"},{label:"物料编码",prop:"materialCode"},{label:"物料名称",prop:"materialName"},{label:"规格",prop:"specifications"},{label:"型号",prop:"model"},{label:"单位",prop:"company"},{label:"需求数量",prop:"demandQuantity"}],tableHead2:[{label:"需求月份",prop:"demandMonth"},{label:"需求日期",prop:"demandDate"},{label:"货源是否稳定",prop:"source"},{label:"期望供应商",prop:"expectedSupplier"},{label:"固定供应商",prop:"fixedSupplier"},{label:"备注",prop:"remarks"},{label:"物料追踪码 ",prop:"materialTrackingCode"},{label:"需求库存组织",prop:"demandOrganization"}]}},methods:{},mounted:function(){},create:function(){}},o=i,r=(a("9f38"),a("2877")),s=Object(r["a"])(o,l,n,!1,null,null,null);e["a"]=s.exports},"9f38":function(t,e,a){"use strict";var l=a("d31b"),n=a.n(l);n.a},d31b:function(t,e,a){},f6ee:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("fun",{attrs:{plan:t.tableData,list:t.list}}),a("br"),a("br"),a("title-text",{staticStyle:{"margin-bottom":"20px"},attrs:{text:"物资需求计划详情",weight:"600",color:"#636569"}}),a("materialPlan",{attrs:{operation:!1,"table-data":t.tableData}}),a("list",{staticStyle:{width:"98%","margin-left":"1%"},attrs:{list:t.list}})],1)},n=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{float:"right","margin-right":"5%"}},[a("el-button",{staticClass:"el-icon-more-outline",attrs:{type:"success",round:""},on:{click:t.message}},[t._v(" 提 醒")]),t.showCopy?a("el-button",{staticClass:"icon-ail-copy",attrs:{type:"primary",round:""},on:{click:t.copy}},[t._v(" 复 制")]):t._e(),a("el-button",{staticClass:"icon-ail-biaoge-xiazai",attrs:{type:"warning",round:""},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 导 出")]),a("el-dialog",{attrs:{title:"导出物料计划",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{attrs:{placeholder:"请输入文件名"},model:{value:t.excelName,callback:function(e){t.excelName=e},expression:"excelName"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:""===t.excelName},on:{click:t.down}},[t._v("下 载")])],1)],1)],1)},o=[];function r(t){return c(t)||p(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function p(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}var d=a("cfd6"),u=d.export_json_to_excel;function m(t,e,l){t[0].planType="1"===t[0].planType?"月计划":"2"===t[0].planType?"年计划":"紧急计划",t[0].planState="1"===t[0].planState?"已计划":"2"===t[0].planState?"已提交汇总":"3"===t[0].planState?"已删除":"自由",t[0].approvalState="1"===t[0].approvalState?"未提交":"2"===t[0].approvalState?"审批通过":"3"===t[0].approvalState?"审批退回":"审批中",t[0].needType="1"===t[0].needType?"订单型":"2"===t[0].needType?"非订单型":"紧急型",console.log(t),Promise.resolve().then(function(){var a=["计划名称","编码","计划类型","需求计划年/月","需求部门","需求人","计划状态","审批状态","需求类型"],n=["planName","planId","planType","planMonth","needDepartment","needPeoName","planState","approvalState","needType"],i=f(n,t),o=["物料分类编码","物料分类名称","物料编码","物料名称","规格","型号","单位","需求数量","需求月份","需求日期","货源是否稳定","期望供应商","固定供应商","备注","物料追踪码","需求库存组织"],s=["materialClassificationCode","materialClassificationName","materialCode","materialName","specifications","model","company","demandQuantity","demandMonth","demandDate","source","expectedSupplier","fixedSupplier","remarks","materialTrackingCode","demandOrganization"],p=f(s,e);i.push([]),i.push(o),i.push.apply(i,r(p)),console.log(i),u(a,i,l)}.bind(null,a)).catch(a.oe)}function f(t,e){return e.map((function(e){return t.map((function(t){return e[t]}))}))}var b={name:"index",props:["plan","list"],data:function(){return{excelName:"",dialogVisible:!1}},methods:{showCopy:function(){return localStorage.getItem("grade")===this.$constData.grade.produce||localStorage.getItem("grade")===this.$constData.grade.department},message:function(){this.$message({type:"warning",message:"系统消息提醒，付款提醒和审批提醒两类，点击按钮进入详情界面?"})},down:function(){m(this.plan,this.list,this.excelName),this.dialogVisible=!1},copy:function(){var t=this;console.log(this.plan),sessionStorage.setItem("createList",JSON.stringify(this.list)),sessionStorage.setItem("createForm",JSON.stringify(this.plan[0])),sessionStorage.setItem("navDefaultActive","1"),this.$store.state.navDefaultActive="1",setTimeout((function(){t.$router.push("createMaterial")}),1)}},mounted:function(){null!=this.list&&""!==this.list||(this.list=[{materialClassificationCode:"",materialClassificationName:"",materialCode:"",materialName:"",specifications:"",model:"",company:"",demandQuantity:"",demandMonth:"",demandDate:"",source:"",expectedSupplier:"",fixedSupplier:"",remarks:"",materialTrackingCode:"",demandOrganization:"",cascader:""}])}},g=b,h=a("2877"),y=Object(h["a"])(g,i,o,!1,null,"43edf5d0",null),S=y.exports,v=a("33be"),x=a("0df8"),w={name:"materialList",components:{materialPlan:v["a"],list:x["a"],fun:S},data:function(){return{list:[],tableData:[JSON.parse(sessionStorage.getItem("materialList"))]}},methods:{},mounted:function(){},created:function(){var t=this,e={planId:this.tableData[0].planId};this.$api.getMetarialList(e,(function(e){t.list=e.data}))}},C=w,_=Object(h["a"])(C,l,n,!1,null,"316463a4",null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-cbd0a60c.c433f0e7.js.map